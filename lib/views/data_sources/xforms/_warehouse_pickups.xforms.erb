<xf:instance id="pickups">
  <pickups>
    <pickup>
      <date />
      <delivery_zone />
      <field_coordinator />
      <%- Package.active.each do |package| -%>
        <item for="<%= package.code %>" DeliveryRequest="" DeliveryPickup="" />
      <%- end -%>
    </pickup>
    <local>
      <date />
    </local>
  </pickups>
</xf:instance>

  <xf:bind nodeset="instance('pickups')/pickup/date" id="pickup_on" required="true()" readonly="true()" />
  <xf:bind nodeset="instance('pickups')/local/date" id="l10n-pickup_on" required="true()" />

<%- Package.active.each do |package|
      %w(DeliveryRequest DeliveryPickup).each do |type|
        id = "warehouse_pickup_#{package.code}:#{type}"
        node = "instance('pickups')/pickup/item[@for='#{package.code}']/@#{type}" -%>

  <xf:bind id="<%= id %>" nodeset="<%= node %>" type="xf:nonNegativeInteger" />

  <%- end
    end -%>
