<h2><%= (I18n.backend.send(:lookup, I18n.locale, "pickups.inventory.page_title") || '').
                      sub("{{delivery_zone}}", %Q{<span class="output selected_delivery_zone_name"></span>}).
                      sub("{{visit_month}}", %Q{<span class="output selected_visit_date_period"></span>}) %></h2>

<h3><%= h(t("pickups.inventory.before_visit")) %></h3>

<div class="pickups">
  <div class="nav">
    <a href="#" onclick="show_visits()"><%= h(t("data_sources.hcvisit.go_to_hc_selection")) %></a>
  </div>

  <div class="wrapper">
    <div class="header">
      <span><%= (I18n.backend.send(:lookup, I18n.locale, "pickups.inventory.province") || '').
                              sub("{{name}}", %Q{<span class="output selected_province_name"><span>}) %></span>
    </div>

    <table class="inventory">
      <thead>
        <tr>
          <th><%= h(t("pickups.inventory.package")) %></th>
          <th class="amount"><%= h(t("pickups.inventory.requested")) %></th>
        </tr>
      </thead>
      <tbody>
        <%- Package.active.sort.each do |package| -%>
          <tr class="inventory_row">
            <td><%= package.label %></td>
            <td class="amount"><span id="warehouse_pickup_<%= package.code %>" class="output"></span></td>
          </tr>
        <%- end -%>
      </tbody>
    </table>
  </div>
</div>

<%- javascript_tag do -%>
  $(function() {
    <%- Package.active.sort.each do |package| -%>
      $("#warehouse_pickup_<%= package.code %>", this).linkFrom(
        "html",
        data_instance.selected_values,
        "delivery_zone",
        function(value) { return value ? data_instance.warehouse_ideal_stock[value]['<%= package.code %>'] : ""; }
      );
    <%- end -%>
  });
<%- end -%>
